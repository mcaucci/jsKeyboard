<!DOCTYPE html>
<head>
	<style>
	#C,#D, #E, #F, #G, #A, #B, #c {
		height: 170px;
		width: 50px;
	}
	</style>
</head>
<script>
	var notes = {'KeyZ': 262, 'KeyX': 294, 'KeyC': 330, 'KeyV': 349, 'KeyB': 392, 'KeyN': 440, 'KeyM': 494, 'Comma': 523};
	var audioCtx;
	var oscOne;
	var oscTwo;
	var distortion;
	var delay;
	var gainNode;
	var isStarted = false;
	var isOn = false;
	
	init = function() {
		audioCtx = new (window.AudioContext || window.webkitAudioContext)();
		
		oscOne = audioCtx.createOscillator();
		oscOne.type = 'triangle';
		oscOne.start()
		
		oscTwo = audioCtx.createOscillator();
		oscTwo.type = 'square';
		oscTwo.start();
		
		distortion = audioCtx.createWaveShaper();
		distortion.curve = makeDistortionCurve(1000);
		
		delay = audioCtx.createDelay();
		delay.delayTime.value = 0.07;
		
		gainNode = audioCtx.createGain();
		
		distortion.connect(gainNode);
		delay.connect(audioCtx.destination);
		gainNode.connect(audioCtx.destination);
	}
	
	makeDistortionCurve = function(amount) {
		var k = typeof amount === 'number' ? amount : 50,
			n_samples = 44100,
			curve = new Float32Array(n_samples),
			deg = Math.PI / 180,
			i = 0,
			x;
		for ( ; i < n_samples; ++i ) {
			x = i * 2 / n_samples - 1;
			curve[i] = ( 3 + k ) * x * 20 * deg / ( Math.PI + k * Math.abs(x) );
		}
		return curve;
	};

	on = function(note) {
		if (!isStarted) {
			init();
			isStarted = true;
		}
		if (isOn) {
			off();
		}
		if (notes[note]) {
			oscOne.frequency.value = notes[note];
			oscTwo.frequency.value = notes[note] / 2;
			oscOne.connect(distortion);
			oscOne.connect(delay);
			oscTwo.connect(distortion);
			isOn = true;
		}
	}

	off = function() {
		if (isOn) {
			oscOne.disconnect(distortion);
			oscOne.disconnect(delay);
			oscTwo.disconnect(distortion);
			isOn = false;
		}
	}

	document.addEventListener('keydown', function(e) {
		on(e.code);
	})

	document.addEventListener('keyup', function() {
		off();
	})
</script>
<button id="C" onmousedown="on('KeyZ')" onmouseup="off()">C</button>
<button id="D" onmousedown="on('KeyX')" onmouseup="off()">D</button>
<button id="E" onmousedown="on('KeyC')" onmouseup="off()">E</button>
<button id="F" onmousedown="on('KeyV')" onmouseup="off()">F</button>
<button id="G" onmousedown="on('KeyB')" onmouseup="off()">G</button>
<button id="A" onmousedown="on('KeyN')" onmouseup="off()">A</button>
<button id="B" onmousedown="on('KeyM')" onmouseup="off()">B</button>
<button id="c" onmousedown="on('Comma')" onmouseup="off()">c</button>